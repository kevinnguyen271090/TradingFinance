{
  "query": "\nCREATE TABLE IF NOT EXISTS `shareCards` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `cardType` enum('prediction_accuracy','profit_loss','achievement','portfolio','strategy') NOT NULL,\n  `imageUrl` text NOT NULL,\n  `title` varchar(200),\n  `stats` json,\n  `shareCount` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  CONSTRAINT `shareCards_id` PRIMARY KEY(`id`),\n  INDEX `share_user_created_idx` (`userId`, `createdAt`),\n  INDEX `share_type_idx` (`cardType`)\n);\n\nCREATE TABLE IF NOT EXISTS `referrals` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `referrerId` int NOT NULL,\n  `refereeId` int,\n  `referralCode` varchar(20) NOT NULL,\n  `status` enum('pending','completed','rewarded') DEFAULT 'pending' NOT NULL,\n  `clickCount` int DEFAULT 0,\n  `conversionDate` timestamp,\n  `rewardAmount` varchar(30),\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  `updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `referrals_id` PRIMARY KEY(`id`),\n  CONSTRAINT `referrals_referralCode_unique` UNIQUE(`referralCode`),\n  INDEX `ref_referrer_idx` (`referrerId`),\n  INDEX `ref_referee_idx` (`refereeId`),\n  INDEX `ref_code_idx` (`referralCode`),\n  INDEX `ref_status_idx` (`status`)\n);\n\nCREATE TABLE IF NOT EXISTS `userStats` (\n  `userId` int NOT NULL,\n  `totalPredictions` int DEFAULT 0,\n  `correctPredictions` int DEFAULT 0,\n  `accuracyPct` int DEFAULT 0,\n  `totalTrades` int DEFAULT 0,\n  `winningTrades` int DEFAULT 0,\n  `totalProfitLoss` varchar(30) DEFAULT '0',\n  `currentStreak` int DEFAULT 0,\n  `longestStreak` int DEFAULT 0,\n  `achievements` json,\n  `level` int DEFAULT 1,\n  `experiencePoints` int DEFAULT 0,\n  `updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `userStats_userId` PRIMARY KEY(`userId`)\n);\n\nCREATE TABLE IF NOT EXISTS `achievements` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `code` varchar(50) NOT NULL,\n  `name` varchar(100) NOT NULL,\n  `description` text,\n  `icon` varchar(100),\n  `category` enum('trading','prediction','social','milestone') NOT NULL,\n  `requirement` json,\n  `rewardPoints` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  CONSTRAINT `achievements_id` PRIMARY KEY(`id`),\n  CONSTRAINT `achievements_code_unique` UNIQUE(`code`)\n);\n\nCREATE TABLE IF NOT EXISTS `userAchievements` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `achievementId` int NOT NULL,\n  `unlockedAt` timestamp NOT NULL DEFAULT (now()),\n  `isShared` boolean DEFAULT false,\n  CONSTRAINT `userAchievements_id` PRIMARY KEY(`id`),\n  CONSTRAINT `user_achievement_unique` UNIQUE(`userId`, `achievementId`),\n  INDEX `user_achievement_user_idx` (`userId`)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 8UTxeFFsxLfpAmp.root --database kTTDLTWHgYtPZ6xRBQcZ2q --execute \nCREATE TABLE IF NOT EXISTS `shareCards` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `cardType` enum('prediction_accuracy','profit_loss','achievement','portfolio','strategy') NOT NULL,\n  `imageUrl` text NOT NULL,\n  `title` varchar(200),\n  `stats` json,\n  `shareCount` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  CONSTRAINT `shareCards_id` PRIMARY KEY(`id`),\n  INDEX `share_user_created_idx` (`userId`, `createdAt`),\n  INDEX `share_type_idx` (`cardType`)\n);\n\nCREATE TABLE IF NOT EXISTS `referrals` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `referrerId` int NOT NULL,\n  `refereeId` int,\n  `referralCode` varchar(20) NOT NULL,\n  `status` enum('pending','completed','rewarded') DEFAULT 'pending' NOT NULL,\n  `clickCount` int DEFAULT 0,\n  `conversionDate` timestamp,\n  `rewardAmount` varchar(30),\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  `updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `referrals_id` PRIMARY KEY(`id`),\n  CONSTRAINT `referrals_referralCode_unique` UNIQUE(`referralCode`),\n  INDEX `ref_referrer_idx` (`referrerId`),\n  INDEX `ref_referee_idx` (`refereeId`),\n  INDEX `ref_code_idx` (`referralCode`),\n  INDEX `ref_status_idx` (`status`)\n);\n\nCREATE TABLE IF NOT EXISTS `userStats` (\n  `userId` int NOT NULL,\n  `totalPredictions` int DEFAULT 0,\n  `correctPredictions` int DEFAULT 0,\n  `accuracyPct` int DEFAULT 0,\n  `totalTrades` int DEFAULT 0,\n  `winningTrades` int DEFAULT 0,\n  `totalProfitLoss` varchar(30) DEFAULT '0',\n  `currentStreak` int DEFAULT 0,\n  `longestStreak` int DEFAULT 0,\n  `achievements` json,\n  `level` int DEFAULT 1,\n  `experiencePoints` int DEFAULT 0,\n  `updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n  CONSTRAINT `userStats_userId` PRIMARY KEY(`userId`)\n);\n\nCREATE TABLE IF NOT EXISTS `achievements` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `code` varchar(50) NOT NULL,\n  `name` varchar(100) NOT NULL,\n  `description` text,\n  `icon` varchar(100),\n  `category` enum('trading','prediction','social','milestone') NOT NULL,\n  `requirement` json,\n  `rewardPoints` int DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT (now()),\n  CONSTRAINT `achievements_id` PRIMARY KEY(`id`),\n  CONSTRAINT `achievements_code_unique` UNIQUE(`code`)\n);\n\nCREATE TABLE IF NOT EXISTS `userAchievements` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `userId` int NOT NULL,\n  `achievementId` int NOT NULL,\n  `unlockedAt` timestamp NOT NULL DEFAULT (now()),\n  `isShared` boolean DEFAULT false,\n  CONSTRAINT `userAchievements_id` PRIMARY KEY(`id`),\n  CONSTRAINT `user_achievement_unique` UNIQUE(`userId`, `achievementId`),\n  INDEX `user_achievement_user_idx` (`userId`)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 2841
}